(()=>{"use strict";var e=function(e,t){t.disabled=e.some((function(e){return!e.validity.valid}))};function t(e){"Escape"===e.key&&popupEls.forEach(n)}function n(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",t)}function o(e){e.classList.add("popup_opened"),document.addEventListener("keydown",t)}function r(e){e.target===e.currentTarget&&n(e.target)}var c=document.querySelector("#edit-profile-popup"),u=document.querySelector(".profile__edit-button"),a=document.querySelector(".profile__name"),i=document.querySelector(".profile__about"),d=document.forms["edit-profile"],s=d.querySelector("#profile-name"),p=d.querySelector("#profile-about");u.addEventListener("click",(function(){s.value=a.textContent,p.value=i.textContent;var e=new Event("input",{bubbles:!0});s.dispatchEvent(e),p.dispatchEvent(e),o(c)})),d.addEventListener("submit",(function(e){e.preventDefault(),a.textContent=s.value,i.textContent=p.value,n(c)}));var l=document.querySelector("#add-post-popup"),m=document.querySelector("#view-photo-popup"),f=document.querySelector(".feed"),v=document.querySelector(".profile__add-post-button"),y=document.forms["add-post"],_=y.querySelector("#post-name"),k=y.querySelector("#post-link"),q=document.querySelector("#post-template").content,S=m.querySelector(".popup__photo"),E=m.querySelector(".popup__photo-name");function h(e){f.prepend(function(e){var t=q.querySelector(".post").cloneNode(!0),n=t.querySelector(".post__photo");n.src=e.link,n.alt=e.name,n.addEventListener("click",(function(){return function(e){S.src=e.link,S.alt=e.name,E.textContent=e.name,o(m)}(e)})),t.querySelector(".post__name").textContent=e.name;var r=t.querySelector(".post__like-button");return r.addEventListener("click",(function(){r.classList.toggle("post__like-button_is-liked")})),t.querySelector(".post__delete-button").addEventListener("click",(function(){t.remove()})),t}(e))}v.addEventListener("click",(function(){o(l)})),y.addEventListener("submit",(function(e){e.preventDefault(),h({name:_.value,link:k.value}),n(l),e.target.reset()})),Array.from(document.querySelectorAll(".form")).forEach((function(t){var n=Array.from(t.querySelectorAll(".form__input")),o=t.querySelector(".form__submit-button");n.forEach((function(r){r.addEventListener("input",(function(){!function(e,t){t.validity.valid?function(e,t){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove("form__input_type_error"),n.classList.remove("form__input-error_active"),n.textContent=""}(e,t):function(e,t,n){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.add("form__input_type_error"),o.textContent=n,o.classList.add("form__input-error_active")}(e,t,t.validationMessage)}(t,r),e(n,o)}))}))})),document.querySelectorAll(".popup").forEach((function(e){e.addEventListener("mousedown",r),e.querySelector(".popup__close-button").addEventListener("click",(function(){return n(e)}))}));var L=[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}];document.addEventListener("DOMContentLoaded",(function(){L.forEach(h)}))})();